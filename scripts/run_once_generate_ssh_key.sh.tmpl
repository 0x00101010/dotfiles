#!/usr/bin/env bash
set -euo pipefail
mkdir -p "$HOME/.ssh"; chmod 700 "$HOME/.ssh"
if [ ! -f "$HOME/.ssh/id_ed25519" ]; then
  ssh-keygen -t ed25519 -C "{{ .email }}" -f "$HOME/.ssh/id_ed25519" -N ""
  echo "==> New SSH key generated. Public key:"
  cat "$HOME/.ssh/id_ed25519.pub"
fi
